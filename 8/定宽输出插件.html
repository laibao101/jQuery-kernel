<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <style type="text/css"></style>
    <script src="images/jquery-1.3.2.js" type="text/javascript" ></script>
    <script type="text/javascript"> 

(function($){
    $.extend($,{
        fixedWidth : function(str, length, char){
			str = str.toString();
			if(!char) char = "...";
			var num = length - lengthB(str);
			if(num < 0 ){
				str = substringB(str, length - lengthB(char) ) + char ;
			}
			return str;			
			function substringB(str, length){
				var num = 0, len = str.length, tenp = ""; 
			    if( len ){
       				for( var i = 0; i < len; i ++ ){
						if(num > length) break;
            			if(str.charCodeAt( i ) > 255 ){
                			num += 2;
							tenp += str.charAt( i );
            			}else{
                			num ++ ;
							tenp += str.charAt( i );
            			}
        			}
        			return tenp;
    			}else{
        			return null;
    			}
			}
			function lengthB(str){
				var num = 0, len = str.length; 
			    if( len ){
       				for( var i = 0; i < len; i ++ ){
            			if(str.charCodeAt( i ) > 255 ){
                			num += 2;
            			}else{
                			num ++ ;
            			}
        			}
        			return num;
    			}else{
        			return 0;
    			}
			}
        }	
    })
})(jQuery);

$(function(){
	var $a = $("li a");
	$a.each(function(){
		var str = $(this).text();
		str = jQuery.fixedWidth(str, 30);
		$(this).text(str);			  
	});
})
    </script>

</head>
<body>

<ul style="width:240px; border:solid 1px red; padding-left:1.5em;">
    <li><a href="#">广西人社厅：2010年广西公务员考试考题泄露18:45</a></li>
    <li><a href="#">广东今年普通高校招生录取首次实施平行志愿09:25</a></li>
    <li><a href="#">教师绩效改革标准制定难09:31</a></li>
    <li><a href="#">Top US Military Officer: Let Gays Serve Openly 11:20</a></li>
    <li><a href="#">Some US Students Learn Mandarin With China's Help13:43</a></li>
    <li><a href="#">A Rough Road for Toyota 17:14</a></li>
</ul>

</body>
</html>
